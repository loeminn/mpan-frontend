{"version":3,"sources":["webpack:///./src/views/category/Category.vue","webpack:///./src/views/category/Category.vue?9df4"],"names":["class","is-category","select-list","selectList","file-list","fileList","loadingStatus","title","mainTitle","file-length","length","total","ref","bottom-loading-status","bottomLoadingStatus","bottomLoading","isLoading","name","components","LoadingMask","FileListEmpty","FileListTable","FileListToolBar","FileListMain","data","refresh","pageNum","computed","categoryCode","this","$route","params","methods","loadFileList","newDir","$bus","emit","then","res","current","records","flag","push","watch","handler","$refs","allChecked","fileBody","scrollTo","mounted","on","clearTimeout","setTimeout","beforeUnmount","all","delete","render","__scopeId"],"mappings":"oNACOA,MAAM,a,+PAAX,eAQM,MARN,EAQM,CAPJ,eAAiH,GAA7FC,cAAY,OAAQC,cAAa,EAAAC,WAAaC,YAAW,EAAAC,SAAW,UAAS,EAAAC,e,gDACjG,eAAuF,GAAtEC,MAAK,KAAO,EAAAC,UAAYC,cAAa,EAAAJ,SAASK,OAASC,MAAO,EAAAA,O,uDAC/E,eAEiD,GAFhCC,IAAI,WAAyCR,YAAW,EAAAC,SAChDF,WAAY,EAAAA,W,qDAAA,EAAAA,WAAU,IAAGU,wBAAuB,EAAAC,oBACvD,gBAAe,EAAAC,e,sFAFsB,IAAf,EAAAV,SAASK,U,eAGjD,eAA2D,kB,QAAnB,IAAf,EAAAL,SAASK,SAAa,EAAAM,a,eAC/C,eAAkC,kB,QAAZ,EAAAA,kB,oFAYX,GACbC,KAAM,WACNC,WAAY,CAACC,cAAA,KAAaC,gBAAA,KAAeC,gBAAA,KAAeC,kBAAA,KAAiBC,eAAA,MACzEC,KAHa,WAIX,MAAO,CACLnB,SAAU,GACVF,WAAY,GACZa,WAAW,EACXS,QAAS,KACTX,qBAAqB,EACrBY,QAAS,EACTf,MAAO,IAGXgB,SAAU,CACRnB,UADQ,WAEN,IAAMoB,EAAeC,KAAKC,OAAOC,OAAOH,aACxC,OAAQA,GACN,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,MACT,IAAK,IACH,MAAO,KACT,QACE,MAAO,MAIfI,QAAS,CACPC,aADO,WACQ,WACbJ,KAAKK,QAAS,EACdL,KAAKb,WAAY,EACjBa,KAAKxB,SAAW,GAChBwB,KAAK1B,WAAa,GAClB0B,KAAKM,KAAKC,KAAK,uBAAuB,GACtC,eAAoBP,KAAKC,OAAOC,OAAOH,aAAc,GAChDS,MAAK,SAAAC,GACJ,EAAKZ,QAAUY,EAAId,KAAKe,QACxB,EAAKlC,SAAWiC,EAAId,KAAKgB,QACzB,EAAK7B,MAAQ2B,EAAId,KAAKb,MACtB,EAAKK,WAAY,MAGzBV,cAfO,SAeOmC,GACZZ,KAAKb,UAAYyB,GAEnB1B,cAlBO,WAkBS,WACVc,KAAKxB,SAASK,OAASmB,KAAKlB,QACzBkB,KAAKf,sBACRe,KAAKf,qBAAsB,EAC3B,eAAoBe,KAAKC,OAAOC,OAAOH,eAAgBC,KAAKH,SACvDW,MAAK,SAAAC,GAAO,MACX,EAAKZ,QAAUY,EAAId,KAAKe,SACxB,IAAKlC,UAASqC,KAAd,uBAAsBJ,EAAId,KAAKgB,UAC/B,EAAK7B,MAAQ2B,EAAId,KAAKb,MACtB,EAAKG,qBAAsB,SAKzC6B,MAAO,CACL,OAAU,CACRC,QADQ,WAEDf,KAAKC,OAAOC,OAAOH,eAGxBC,KAAKgB,MAAMxC,SAASyC,YAAa,EACjCjB,KAAKgB,MAAMxC,SAASwC,MAAME,SAASC,SAAS,EAAG,GAC/CnB,KAAKI,mBAKXgB,QAhFa,WAgFH,WACRpB,KAAKI,eACLJ,KAAKM,KAAKe,GAAG,gBAAgB,WAC3B,EAAKjB,kBAEPJ,KAAKM,KAAKe,GAAG,mBAAmB,WAC9BC,aAAa,EAAK1B,SAClB,EAAKA,QAAU2B,YAAW,WACxB,EAAKnB,iBACJ,SAGPoB,cA5Fa,WA6FXxB,KAAKM,KAAKmB,IAAIC,OAAO,gBACrB1B,KAAKM,KAAKmB,IAAIC,OAAO,qBC/GzB,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d21a3d2.c35ed56d.js","sourcesContent":["<template>\r\n  <div class=\"file-list\">\r\n    <file-list-tool-bar is-category=\"true\" :select-list=\"selectList\" :file-list=\"fileList\" @loading=\"loadingStatus\"/>\r\n    <file-list-main :title=\"'全部'+mainTitle\" :file-length=\"fileList.length\" :total=\"total\"/>\r\n    <file-list-table ref=\"fileList\" v-show=\"fileList.length!==0\" :file-list=\"fileList\"\r\n                     v-model:selectList=\"selectList\" :bottom-loading-status=\"bottomLoadingStatus\"\r\n                     @bottomLoading=\"bottomLoading\"/>\r\n    <file-list-empty v-show=\"fileList.length===0&&!isLoading\"/>\r\n    <loading-mask v-show=\"isLoading\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FileListMain from \"@/components/fileList/FileListMain\";\r\nimport FileListToolBar from \"@/components/fileList/fileListToolbar/FileListToolBar\";\r\nimport FileListTable from \"@/components/fileList/fileListTable/FileListTable\";\r\nimport FileListEmpty from \"@/components/fileList/FileListEmpty\";\r\nimport LoadingMask from \"@/components/loadingMask/LoadingMask\";\r\nimport {getCategoryFileList} from \"@/api/file\";\r\n\r\nexport default {\r\n  name: \"Category\",\r\n  components: {LoadingMask, FileListEmpty, FileListTable, FileListToolBar, FileListMain},\r\n  data() {\r\n    return {\r\n      fileList: [],\r\n      selectList: [],\r\n      isLoading: true,\r\n      refresh: null,\r\n      bottomLoadingStatus: false,\r\n      pageNum: 1,\r\n      total: 0\r\n    }\r\n  },\r\n  computed: {\r\n    mainTitle() {\r\n      const categoryCode = this.$route.params.categoryCode;\r\n      switch (categoryCode) {\r\n        case '1':\r\n          return '图片'\r\n        case '2':\r\n          return '视频'\r\n        case '3':\r\n          return '文档'\r\n        case '4':\r\n          return '音频'\r\n        case '5':\r\n          return '压缩包'\r\n        case '0':\r\n          return '其他'\r\n        default:\r\n          return ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    loadFileList() {\r\n      this.newDir = false\r\n      this.isLoading = true\r\n      this.fileList = []\r\n      this.selectList = []\r\n      this.$bus.emit('toggleCreateDirItem', false)\r\n      getCategoryFileList(this.$route.params.categoryCode, 1)\r\n          .then(res => {\r\n            this.pageNum = res.data.current\r\n            this.fileList = res.data.records\r\n            this.total = res.data.total\r\n            this.isLoading = false\r\n          })\r\n    },\r\n    loadingStatus(flag) {\r\n      this.isLoading = flag\r\n    },\r\n    bottomLoading() {\r\n      if (this.fileList.length < this.total)\r\n        if (!this.bottomLoadingStatus) {\r\n          this.bottomLoadingStatus = true\r\n          getCategoryFileList(this.$route.params.categoryCode, ++this.pageNum)\r\n              .then(res => {\r\n                this.pageNum = res.data.current\r\n                this.fileList.push(...res.data.records)\r\n                this.total = res.data.total\r\n                this.bottomLoadingStatus = false\r\n              })\r\n        }\r\n    }\r\n  },\r\n  watch: {\r\n    '$route': {\r\n      handler() {\r\n        if (!this.$route.params.categoryCode) {\r\n          return\r\n        }\r\n        this.$refs.fileList.allChecked = false\r\n        this.$refs.fileList.$refs.fileBody.scrollTo(0, 0)\r\n        this.loadFileList()\r\n\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadFileList()\r\n    this.$bus.on('loadFileList', () => {\r\n      this.loadFileList()\r\n    })\r\n    this.$bus.on('refreshFileList', () => {\r\n      clearTimeout(this.refresh)\r\n      this.refresh = setTimeout(() => {\r\n        this.loadFileList()\r\n      }, 2000)\r\n    })\r\n  },\r\n  beforeUnmount() {\r\n    this.$bus.all.delete('loadFileList')\r\n    this.$bus.all.delete('refreshFileList')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Category.vue?vue&type=template&id=eabdcf60&scoped=true\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-eabdcf60\"\n\nexport default script"],"sourceRoot":""}