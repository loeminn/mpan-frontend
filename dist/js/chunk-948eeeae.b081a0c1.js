(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-948eeeae"],{"119d":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),i=Object(a["J"])("data-v-6c6ca246");Object(a["t"])("data-v-6c6ca246");var c={class:"main"},o={class:"auth-container"};Object(a["r"])();var r=i((function(e,t,n,i,r,l){var s=Object(a["y"])("Login"),u=Object(a["y"])("Register"),d=Object(a["y"])("Introduction");return Object(a["q"])(),Object(a["e"])("div",c,[Object(a["h"])("div",o,[Object(a["h"])(s,{class:"sign-mod"}),Object(a["h"])(u,{class:"sign-mod"}),Object(a["h"])(d)])])})),l=n("a687"),s=Object(a["J"])("data-v-3357f1b4");Object(a["t"])("data-v-3357f1b4");var u=Object(a["h"])("div",{class:"text"},[Object(a["h"])("p",{class:"title"},"登录"),Object(a["h"])("p",{class:"sub-title"},"欢迎回来，请登录您的账号")],-1),d=Object(a["g"])("登录");Object(a["r"])();var b=s((function(e,t,n,i,c,o){var r=Object(a["y"])("m-input"),l=Object(a["y"])("m-form-item"),b=Object(a["y"])("m-checkbox"),f=Object(a["y"])("m-button"),p=Object(a["y"])("m-form");return Object(a["q"])(),Object(a["e"])("div",null,[u,Object(a["h"])(p,{ref:"signInForm",model:c.signIn,rules:c.signInRules,class:"sign-form"},{default:s((function(){return[Object(a["h"])(l,{prop:"email"},{default:s((function(){return[Object(a["h"])(r,{modelValue:c.signIn.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.signIn.email=e}),placeholder:"邮箱地址"},null,8,["modelValue"])]})),_:1}),Object(a["h"])(l,{prop:"pwd"},{default:s((function(){return[Object(a["h"])(r,{modelValue:c.signIn.pwd,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.signIn.pwd=e}),placeholder:"密码",pwd:""},null,8,["modelValue"])]})),_:1}),Object(a["h"])(l,null,{default:s((function(){return[Object(a["h"])(b,{label:"记住我",modelValue:c.signIn.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.signIn.rememberMe=e})},null,8,["modelValue"])]})),_:1}),Object(a["h"])(f,{class:"sign-btn",loading:c.btnLoading,onClick:t[4]||(t[4]=function(e){return o.signInSubmit("signInForm")})},{default:s((function(){return[d]})),_:1},8,["loading"])]})),_:1},8,["model","rules"])])})),f=(n("d3b7"),n("e6f9")),p=n("42e8"),m=n("7de5"),h=n("2746"),g=n("ab0b"),O=n("3786"),j={name:"Login",components:{MFormItem:f["a"],MForm:p["a"],MCheckbox:m["a"],MButton:h["a"],MInput:g["a"]},data:function(){return{signIn:{email:"",pwd:"",rememberMe:!1},signInRules:{email:[{required:!0,message:"请输入邮箱地址"},{pattern:"^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$",message:"邮箱地址格式不正确"}],pwd:[{required:!0,message:"请输入密码"}]},btnLoading:!1}},methods:{signInSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.btnLoading=!0,Object(O["b"])(t.signIn).then((function(e){var n=e.data.token;localStorage.setItem("authorization",n),t.$store.commit("toggleLoginStatus",!0),t.$store.commit("updateUserInfo",e.data.userInfo),t.$router.push("/")})).catch((function(e){t.$message.error(e.msg)})).finally((function(){t.btnLoading=!1})))}))}}};n("810b");j.render=b,j.__scopeId="data-v-3357f1b4";var v=j,y=Object(a["J"])("data-v-59b2d622");Object(a["t"])("data-v-59b2d622");var w=Object(a["h"])("div",{class:"text"},[Object(a["h"])("p",{class:"title"},"注册"),Object(a["h"])("p",{class:"sub-title"},"请注册您的账号")],-1),U={class:"verify-code"},k={key:0},I={key:1},C=Object(a["g"])("注册");Object(a["r"])();var V=y((function(e,t,n,i,c,o){var r=Object(a["y"])("m-input"),l=Object(a["y"])("m-form-item"),s=Object(a["y"])("m-button"),u=Object(a["y"])("m-form");return Object(a["q"])(),Object(a["e"])("div",null,[w,Object(a["h"])(u,{ref:"signUpForm",model:c.signUp,rules:c.signUpRules,class:"sign-form"},{default:y((function(){return[Object(a["h"])(l,{prop:"email"},{default:y((function(){return[Object(a["h"])(r,{modelValue:c.signUp.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.signUp.email=e}),placeholder:"邮箱地址"},null,8,["modelValue"])]})),_:1}),Object(a["h"])("div",U,[Object(a["h"])(l,{class:"verify-code-inp",prop:"verifyCode"},{default:y((function(){return[Object(a["h"])(r,{modelValue:c.signUp.verifyCode,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.signUp.verifyCode=e}),placeholder:"验证码"},null,8,["modelValue"])]})),_:1}),Object(a["h"])(s,{class:"verify-code-btn",type:"secondary",loading:c.verifyCodeBtnLoading,disabled:c.verifyCodeBtnDisabled,onClick:o.sendVerifyCode},{default:y((function(){return[c.verifyCodeBtnDisabled?(Object(a["q"])(),Object(a["e"])("span",k,Object(a["A"])(c.countdown)+"s后重试",1)):(Object(a["q"])(),Object(a["e"])("span",I,"获取验证码"))]})),_:1},8,["loading","disabled","onClick"])]),Object(a["h"])(l,{prop:"pwd"},{default:y((function(){return[Object(a["h"])(r,{modelValue:c.signUp.pwd,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.signUp.pwd=e}),placeholder:"密码",pwd:""},null,8,["modelValue"])]})),_:1}),Object(a["h"])(l,{prop:"checkPwd"},{default:y((function(){return[Object(a["h"])(r,{modelValue:c.signUp.checkPwd,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.signUp.checkPwd=e}),placeholder:"确认密码",pwd:""},null,8,["modelValue"])]})),_:1}),Object(a["h"])(s,{class:"sign-btn",loading:c.signUpBtnLoading,onClick:t[5]||(t[5]=function(e){return o.signUpSubmit("signUpForm")})},{default:y((function(){return[C]})),_:1},8,["loading"])]})),_:1},8,["model","rules"])])})),_={name:"Register",components:{MFormItem:f["a"],MForm:p["a"],MCheckbox:m["a"],MButton:h["a"],MInput:g["a"]},data:function(){return{signUp:{email:"",pwd:"",checkPwd:"",verifyCode:""},signUpRules:{email:[{asyncValidator:this.validateEmail}],pwd:[{validator:this.validatePwd}],checkPwd:[{validator:this.validateCheckPwd}],verifyCode:[{required:!0,message:"请输入验证码"}]},verifyCodeBtnDisabled:!1,verifyCodeBtnLoading:!1,countdown:60,signUpBtnLoading:!1}},methods:{signUpSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.signUpBtnLoading=!0,Object(O["d"])(t.signUp).then((function(e){var n=e.data.token;localStorage.setItem("authorization",n),t.$store.commit("toggleLoginStatus",!0),t.$store.commit("updateUserInfo",e.data.userInfo),t.$router.push("/")})).catch((function(e){t.$message.error(e.msg)})).finally((function(){t.signUpBtnLoading=!1})))}))},sendVerifyCode:function(){var e=this;this.$refs.signUpForm.validateField("email",(function(t){t&&(e.verifyCodeBtnLoading=!0,Object(O["e"])(e.signUp.email).then((function(){e.$message.success("邮件发送成功"),e.verifyCodeRetryTiming()})).catch((function(t){e.$message.error(t.msg)})).finally((function(){e.verifyCodeBtnLoading=!1})))}))},validateCheckPwd:function(e,t,n){""===t?n(new Error("请再次输入密码")):t!==this.signUp.pwd?n(new Error("两次输入的密码不一致")):n()},validatePwd:function(e,t,n){""===t?n(new Error("请输入密码")):-1!==t.indexOf(" ")?n(new Error("不能包含空格")):t.length<6||t.length>16?n(new Error("长度为6-16个字符")):n(),""!==this.signUp.checkPwd&&this.$refs.signUpForm.validateField("checkPwd")},verifyCodeRetryTiming:function(){var e=this;this.verifyCodeBtnDisabled=!0;var t=setInterval((function(){if(1===e.countdown)return e.countdown=60,clearInterval(t),void(e.verifyCodeBtnDisabled=!1);e.countdown--}),1e3)},validateEmail:function(e,t,n){""===t?n(new Error("请输入邮箱地址")):/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?Object(O["a"])(t).then((function(){n()})).catch((function(){n(new Error("邮箱已注册"))})):n(new Error("邮箱地址格式不正确"))}}};n("8857");_.render=V,_.__scopeId="data-v-59b2d622";var $=_,B=Object(a["J"])("data-v-2f46965e");Object(a["t"])("data-v-2f46965e");var L=Object(a["h"])("div",{class:"header-icon"},[Object(a["h"])("svg",{class:"icon","aria-hidden":"true"},[Object(a["h"])("use",{"xlink:href":"#icon-yunpan"})]),Object(a["h"])("span",null,"MPan")],-1),M={class:"tip register"},F=Object(a["h"])("p",{class:"title"},"还没有账号？",-1),S={class:"pre-text"},x=Object(a["h"])("span",null,"点击去",-1),q={class:"tip login"},P=Object(a["h"])("p",{class:"title"},"已有账号？",-1),E={class:"pre-text"},R=Object(a["h"])("span",null,"点击去",-1);Object(a["r"])();var J=B((function(e,t,n,i,c,o){return Object(a["q"])(),Object(a["e"])("div",{class:["info-mod",{"signup-active":c.isSignUp}]},[L,Object(a["h"])("div",M,[F,Object(a["h"])("div",S,[x,Object(a["h"])("span",{class:"action",onClick:t[1]||(t[1]=function(){return o.toggleForm&&o.toggleForm.apply(o,arguments)})},"注册")])]),Object(a["h"])("div",q,[P,Object(a["h"])("div",E,[R,Object(a["h"])("span",{class:"action",onClick:t[2]||(t[2]=function(){return o.toggleForm&&o.toggleForm.apply(o,arguments)})},"登录")])])],2)})),D={name:"Introduction",data:function(){return{isSignUp:!1}},methods:{toggleForm:function(){this.isSignUp=!this.isSignUp,this.$route.query.type&&history.replaceState({},"","/auth")}},mounted:function(){this.$route.query.type&&(this.isSignUp="register"===this.$route.query.type)}};n("b2f7");D.render=J,D.__scopeId="data-v-2f46965e";var A=D,T={name:"Auth",components:{Introduction:A,Register:$,Login:v,NavBar:l["a"]},mounted:function(){history.replaceState(null,null,document.URL)}};n("9c00"),n("9ff0");T.render=r,T.__scopeId="data-v-6c6ca246";t["default"]=T},"1a8a":function(e,t,n){},2306:function(e,t,n){},2425:function(e,t,n){},"7de5":function(e,t,n){"use strict";var a=n("7a23"),i=Object(a["J"])("data-v-1f239c30");Object(a["t"])("data-v-1f239c30");var c={class:"checkbox-item"},o=Object(a["h"])("span",{class:"m-checkbox-span"},null,-1),r={key:0,class:"label"};Object(a["r"])();var l=i((function(e,t,n,i,l,s){return Object(a["q"])(),Object(a["e"])("label",{class:["m-checkbox",{disabled:n.disabled}],onClick:t[4]||(t[4]=Object(a["I"])((function(){}),["stop"])),onDblclick:t[5]||(t[5]=Object(a["I"])((function(){}),["stop"]))},[Object(a["h"])("span",c,[Object(a["H"])(Object(a["h"])("input",{class:"m-checkbox-input",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.modelValue=e}),onClick:t[2]||(t[2]=function(){return s.click&&s.click.apply(s,arguments)}),onChange:t[3]||(t[3]=function(){return s.changeModelValue&&s.changeModelValue.apply(s,arguments)}),value:n.value,disabled:n.disabled},null,40,["value","disabled"]),[[a["C"],n.modelValue]]),o]),n.label?(Object(a["q"])(),Object(a["e"])("span",r,Object(a["A"])(n.label),1)):Object(a["f"])("",!0)],34)})),s=(n("a9e3"),{name:"MCheckbox",props:{label:String,modelValue:[Array,Boolean],value:[String,Number],disabled:{type:Boolean,default:!1}},methods:{changeModelValue:function(){this.$emit("update:modelValue",this.modelValue)},click:function(e){this.$emit("clickInput",e.currentTarget.checked)}}});n("c763");s.render=l,s.__scopeId="data-v-1f239c30";t["a"]=s},"810b":function(e,t,n){"use strict";n("2306")},8857:function(e,t,n){"use strict";n("a352")},"9c00":function(e,t,n){"use strict";n("1a8a")},"9ff0":function(e,t,n){"use strict";n("2425")},a352:function(e,t,n){},b2f7:function(e,t,n){"use strict";n("c4ab")},b7d7:function(e,t,n){},c4ab:function(e,t,n){},c763:function(e,t,n){"use strict";n("b7d7")}}]);
//# sourceMappingURL=chunk-948eeeae.b081a0c1.js.map