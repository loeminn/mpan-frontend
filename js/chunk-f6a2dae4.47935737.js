(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6a2dae4"],{"055b":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),s=Object(n["J"])("data-v-2a0ab00c");Object(n["t"])("data-v-2a0ab00c");var d=Object(n["h"])("div",{class:"ucenter-container-title"},"修改密码",-1),a={class:"ucenter-container-body"},i={key:0},o={class:"item"},r=Object(n["h"])("div",{class:"label"},"绑定邮箱:",-1),l={class:"descript"},u={class:"item"},b=Object(n["h"])("div",{class:"label"},"验证码:",-1),p={class:"descript"},h={key:0},j={key:1},O={class:"next-btn"},f=Object(n["g"])("下一步"),v={key:1},m={class:"item"},w=Object(n["h"])("div",{class:"label"},"新密码:",-1),k={class:"descript"},g={class:"item"},C=Object(n["h"])("div",{class:"label"},"确定密码:",-1),y={class:"descript"},F={class:"next-btn"},x=Object(n["g"])("下一步"),P={key:2,class:"success"},_=Object(n["h"])("div",null,[Object(n["h"])("div",{class:"success-title"},[Object(n["h"])("span",null,[Object(n["h"])("svg",{class:"icon","aria-hidden":"true"},[Object(n["h"])("use",{"xlink:href":"#icon-success"})])]),Object(n["h"])("span",null," 密码修改成功 ")]),Object(n["h"])("div",{class:"success-content"},"即将返回到登录页面")],-1);Object(n["r"])();var I=s((function(e,t,c,I,q,$){var S=Object(n["y"])("step"),V=Object(n["y"])("steps"),D=Object(n["y"])("m-input"),E=Object(n["y"])("m-button"),J=Object(n["y"])("m-form-item"),A=Object(n["y"])("m-form");return Object(n["q"])(),Object(n["e"])("div",null,[d,Object(n["h"])("div",a,[Object(n["h"])(V,{active:q.steps},{default:s((function(){return[Object(n["h"])(S,{title:"验证身份"}),Object(n["h"])(S,{title:"设置新密码"}),Object(n["h"])(S,{title:"修改成功"})]})),_:1},8,["active"]),1===q.steps?(Object(n["q"])(),Object(n["e"])("div",i,[Object(n["h"])("div",o,[r,Object(n["h"])("div",l,Object(n["A"])(e.$store.state.userInfo.email),1)]),Object(n["h"])("div",u,[b,Object(n["h"])("div",p,[Object(n["h"])(D,{class:"code-inp",modelValue:q.emailCode,"onUpdate:modelValue":t[1]||(t[1]=function(e){return q.emailCode=e}),placeholder:"请输入验证码"},null,8,["modelValue"]),Object(n["h"])(E,{loading:q.sendCodeLoading,disabled:q.sendCodeDisabled,type:"secondary",onClick:$.sendCode},{default:s((function(){return[q.sendCodeDisabled?(Object(n["q"])(),Object(n["e"])("span",h,Object(n["A"])(q.countdown)+"s后重试",1)):(Object(n["q"])(),Object(n["e"])("span",j,"获取验证码"))]})),_:1},8,["loading","disabled","onClick"])])]),Object(n["h"])("div",O,[Object(n["h"])(E,{onClick:$.verifyIdentity},{default:s((function(){return[f]})),_:1},8,["onClick"])])])):2===q.steps?(Object(n["q"])(),Object(n["e"])("div",v,[Object(n["h"])(A,{class:"pwd-form",ref:"pwdForm",model:q.pwdForm,rules:q.pwdRules},{default:s((function(){return[Object(n["h"])("div",m,[w,Object(n["h"])("div",k,[Object(n["h"])(J,{prop:"pwd"},{default:s((function(){return[Object(n["h"])(D,{modelValue:q.pwdForm.pwd,"onUpdate:modelValue":t[2]||(t[2]=function(e){return q.pwdForm.pwd=e}),placeholder:"请输入新密码",pwd:""},null,8,["modelValue"])]})),_:1})])]),Object(n["h"])("div",g,[C,Object(n["h"])("div",y,[Object(n["h"])(J,{prop:"checkPwd"},{default:s((function(){return[Object(n["h"])(D,{modelValue:q.pwdForm.checkPwd,"onUpdate:modelValue":t[3]||(t[3]=function(e){return q.pwdForm.checkPwd=e}),placeholder:"请确认密码",pwd:""},null,8,["modelValue"])]})),_:1})])])]})),_:1},8,["model","rules"]),Object(n["h"])("div",F,[Object(n["h"])(E,{onClick:t[4]||(t[4]=function(e){return $.pwdFormSubmit("pwdForm")})},{default:s((function(){return[x]})),_:1})])])):3===q.steps?(Object(n["q"])(),Object(n["e"])("div",P,[_])):Object(n["f"])("",!0)])])})),q=(c("d3b7"),c("ab0b")),$=c("c1cf"),S=c("495d"),V=c("2746"),D=c("c24f"),E=c("42e8"),J=c("e6f9"),A={name:"SetPassword",components:{MFormItem:J["a"],MForm:E["a"],MButton:V["a"],Steps:S["a"],Step:$["a"],MInput:q["a"]},data:function(){return{steps:1,sendCodeLoading:!1,sendCodeDisabled:!1,countdown:60,emailCode:"",pwdForm:{pwd:"",checkPwd:""},pwdRules:{pwd:[{validator:this.validatePwd}],checkPwd:[{validator:this.validateCheckPwd}]}}},methods:{sendCode:function(){var e=this;this.sendCodeLoading=!0,Object(D["g"])().then((function(){e.sendCodeDisabled=!0,e.$message.success("邮箱发送成功",1500);var t=setInterval((function(){if(1===e.countdown)return e.sendCodeDisabled=!1,e.countdown=60,void clearInterval(t);e.countdown--}),1e3)})).catch((function(t){e.$message.error(t.msg,1500)})).finally((function(){e.sendCodeLoading=!1}))},verifyIdentity:function(){var e=this;0!==this.emailCode.length?Object(D["c"])(this.emailCode).then((function(){e.steps++})).catch((function(t){e.$message.error(t.msg,1500)})):this.$message.error("验证码不能为空",1500)},validateCheckPwd:function(e,t,c){""===t?c(new Error("请再次输入密码")):t!==this.pwdForm.pwd?c(new Error("两次输入的密码不一致")):c()},validatePwd:function(e,t,c){""===t?c(new Error("请输入密码")):-1!==t.indexOf(" ")?c(new Error("不能包含空格")):t.length<6||t.length>16?c(new Error("长度为6-16个字符")):c(),""!==this.pwdForm.checkPwd&&this.$refs.pwdForm.validateField("checkPwd")},pwdFormSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var c=t.$message.loading("密码修改中","pwd");Object(D["j"])(t.pwdForm.pwd,t.pwdForm.checkPwd,t.emailCode).then((function(){c(),t.steps++,localStorage.removeItem("authorization"),setTimeout((function(){location.href="/auth"}),2e3)})).catch((function(e){t.$message.error(e.msg,1500,"pwd")}))}}))}}};c("a9f2");A.render=I,A.__scopeId="data-v-2a0ab00c";t["default"]=A},2457:function(e,t,c){},3022:function(e,t,c){},"495d":function(e,t,c){"use strict";var n=c("7a23"),s=Object(n["J"])("data-v-4c19db40");Object(n["t"])("data-v-4c19db40");var d={class:"steps"};Object(n["r"])();var a=s((function(e,t,c,s,a,i){return Object(n["q"])(),Object(n["e"])("div",d,[Object(n["x"])(e.$slots,"default",{},void 0,!0)])})),i=(c("a9e3"),{name:"Steps",provide:function(){return{steps:this}},props:{active:{type:Number,default:0}},data:function(){return{count:0}},mounted:function(){}});c("8b3e");i.render=a,i.__scopeId="data-v-4c19db40";t["a"]=i},"5bb2":function(e,t,c){},"8b3e":function(e,t,c){"use strict";c("2457")},"9bf7":function(e,t,c){"use strict";c("5bb2")},a9f2:function(e,t,c){"use strict";c("3022")},c1cf:function(e,t,c){"use strict";var n=c("7a23"),s=Object(n["J"])("data-v-9754da56");Object(n["t"])("data-v-9754da56");var d={class:"step-icon"},a={key:0,class:"success-icon"},i=Object(n["h"])("svg",{class:"icon","aria-hidden":"true"},[Object(n["h"])("use",{"xlink:href":"#icon-dui"})],-1),o={key:1},r={class:"step-title"};Object(n["r"])();var l=s((function(e,t,c,s,l,u){return Object(n["q"])(),Object(n["e"])("div",{class:["step",{over:u.steps.count===l.index,active:u.steps.active===l.index,finish:u.steps.active>l.index,wait:u.steps.active<l.index}]},[Object(n["h"])("div",d,[u.steps.active>l.index?(Object(n["q"])(),Object(n["e"])("span",a,[i])):(Object(n["q"])(),Object(n["e"])("span",o,Object(n["A"])(l.index),1))]),Object(n["h"])("div",r,Object(n["A"])(c.title),1)],2)})),u={name:"Step",inject:["steps"],props:{title:String},data:function(){return{index:0}},mounted:function(){this.index=++this.steps.count}};c("9bf7");u.render=l,u.__scopeId="data-v-9754da56";t["a"]=u}}]);
//# sourceMappingURL=chunk-f6a2dae4.47935737.js.map