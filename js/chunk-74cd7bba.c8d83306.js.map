{"version":3,"sources":["webpack:///./src/components/steps/Steps.vue","webpack:///./src/components/steps/Steps.vue?d93b","webpack:///./src/views/ucenter/childComps/BindEmail.vue?6776","webpack:///./src/components/steps/Steps.vue?d96a","webpack:///./src/components/steps/Step.vue?451e","webpack:///./src/components/steps/Step.vue","webpack:///./src/components/steps/Step.vue?e74b","webpack:///./src/views/ucenter/childComps/BindEmail.vue","webpack:///./src/views/ucenter/childComps/BindEmail.vue?64ed"],"names":["class","name","provide","steps","this","props","active","type","Number","default","data","count","mounted","render","__scopeId","aria-hidden","xlink:href","index","title","inject","String","ref","model","emailForm","rules","emailRules","$store","state","userInfo","email","prop","emailCode","placeholder","loading","sendCodeLoading","disabled","sendCodeDisabled","sendCode","countdown","verifyIdentity","newEmail","newEmailCode","sendNewEmailCodeLoading","sendNewEmailCodeDisabled","sendNewEmailCode","newEmailCountdown","bindEmail","components","MForm","MFormItem","MButton","MInput","Step","Steps","required","message","asyncValidator","validateEmail","methods","rule","value","callback","Error","test","then","catch","$message","success","interval","setInterval","clearInterval","res","error","msg","finally","$refs","validate","valid","validateField","localStorage","removeItem","setTimeout","location","href"],"mappings":"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","file":"js/chunk-74cd7bba.c8d83306.js","sourcesContent":["<template>\r\n  <div class=\"steps\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Steps\",\r\n  provide() {\r\n    return {\r\n      steps: this\r\n    }\r\n  },\r\n  props: {\r\n    active: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      count:0\r\n    }\r\n  },\r\n  mounted() {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.steps {\r\n  display: flex;\r\n}\r\n</style>","import { render } from \"./Steps.vue?vue&type=template&id=4c19db40&scoped=true\"\nimport script from \"./Steps.vue?vue&type=script&lang=js\"\nexport * from \"./Steps.vue?vue&type=script&lang=js\"\n\nimport \"./Steps.vue?vue&type=style&index=0&id=4c19db40&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-4c19db40\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BindEmail.vue?vue&type=style&index=0&id=62144c5d&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Steps.vue?vue&type=style&index=0&id=4c19db40&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Step.vue?vue&type=style&index=0&id=9754da56&scoped=true&lang=css\"","<template>\r\n  <div class=\"step\"\r\n       :class=\"{\r\n    'over':steps.count===index,\r\n  'active':steps.active===index,\r\n  'finish':steps.active>index,\r\n  'wait':steps.active<index}\">\r\n    <div class=\"step-icon\">\r\n      <span class=\"success-icon\" v-if=\"steps.active>index\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-dui\"></use>\r\n        </svg>\r\n      </span>\r\n      <span v-else>{{ index }}</span>\r\n    </div>\r\n    <div class=\"step-title\">{{ title }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Step\",\r\n  inject: ['steps'],\r\n  props: {\r\n    title: String\r\n  },\r\n  data() {\r\n    return {\r\n      index: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.index = ++this.steps.count\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.step.over {\r\n  flex: none;\r\n  margin-right: 0;\r\n}\r\n\r\n.step.over .step-title:after {\r\n  height: 0;\r\n  width: 0;\r\n}\r\n\r\n.step-title:after {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 100%;\r\n  display: block;\r\n  width: 999px;\r\n  height: 2px;\r\n  background: #e5e9ef;\r\n  content: \"\";\r\n}\r\n\r\n.step.over .step-title {\r\n  padding-right: 0;\r\n}\r\n\r\n.step-title {\r\n  padding-right: 12px;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  line-height: 24px;\r\n  position: relative;\r\n}\r\n\r\n.success-icon {\r\n  margin-top: 2px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.step {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  margin-right: 10px;\r\n}\r\n\r\n.step.wait .step-title {\r\n  color: #99a2aa;\r\n}\r\n\r\n.step.wait .step-icon {\r\n  color: #ccd0d7;\r\n  border-color: #ccd0d7;\r\n}\r\n\r\n.step.active .step-title {\r\n  color: #46a7ff;\r\n}\r\n\r\n.step.active .step-icon {\r\n  color: #46a7ff;\r\n  border-color: #46a7ff;\r\n}\r\n\r\n.step.finish .step-title {\r\n  color: #67c23a;\r\n}\r\n\r\n.step.finish .step-icon {\r\n  color: #67c23a;\r\n  border-color: #67c23a;\r\n}\r\n\r\n.step-icon {\r\n  border-radius: 50%;\r\n  border: #46a7ff solid 2px;\r\n  color: #46a7ff;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 8px;\r\n}\r\n</style>","import { render } from \"./Step.vue?vue&type=template&id=9754da56&scoped=true\"\nimport script from \"./Step.vue?vue&type=script&lang=js\"\nexport * from \"./Step.vue?vue&type=script&lang=js\"\n\nimport \"./Step.vue?vue&type=style&index=0&id=9754da56&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-9754da56\"\n\nexport default script","<template>\r\n  <div>\r\n    <div class=\"ucenter-container-title\">更换邮箱</div>\r\n    <div class=\"ucenter-container-body\">\r\n      <steps :active=\"steps\">\r\n        <step title=\"验证身份\"/>\r\n        <step title=\"验证新邮箱\"/>\r\n        <step title=\"修改成功\"/>\r\n      </steps>\r\n      <m-form ref=\"emailForm\" :model=\"emailForm\" :rules=\"emailRules\">\r\n        <div v-if=\"steps===1\">\r\n          <div class=\"item\">\r\n            <div class=\"label\">绑定邮箱:</div>\r\n            <div class=\"descript\">\r\n              {{ $store.state.userInfo.email }}\r\n            </div>\r\n          </div>\r\n          <div class=\"item form\">\r\n            <div class=\"label\">验证码:</div>\r\n            <div class=\"descript\">\r\n              <m-form-item prop=\"emailCode\">\r\n                <m-input class=\"code-inp\" v-model=\"emailForm.emailCode\" placeholder=\"请输入验证码\"/>\r\n              </m-form-item>\r\n              <m-button :loading=\"sendCodeLoading\"\r\n                        :disabled=\"sendCodeDisabled\"\r\n                        type=\"secondary\"\r\n                        @click=\"sendCode\">\r\n                <span v-if=\"sendCodeDisabled\">{{ countdown }}s后重试</span>\r\n                <span v-else>获取验证码</span>\r\n              </m-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"next-btn\">\r\n            <m-button @click=\"verifyIdentity\">下一步</m-button>\r\n          </div>\r\n        </div>\r\n        <div v-else-if=\"steps===2\">\r\n          <div class=\"item form\">\r\n            <div class=\"label\">新邮箱:</div>\r\n            <div class=\"descript\">\r\n              <m-form-item prop=\"newEmail\">\r\n                <m-input v-model=\"emailForm.newEmail\" placeholder=\"请输入新邮箱\"/>\r\n              </m-form-item>\r\n            </div>\r\n          </div>\r\n          <div class=\"item form\">\r\n            <div class=\"label\">验证码:</div>\r\n            <div class=\"descript\">\r\n              <m-form-item prop=\"newEmailCode\">\r\n                <m-input class=\"code-inp\" v-model=\"emailForm.newEmailCode\" placeholder=\"请输入验证码\"/>\r\n              </m-form-item>\r\n              <m-button :loading=\"sendNewEmailCodeLoading\"\r\n                        :disabled=\"sendNewEmailCodeDisabled\"\r\n                        type=\"secondary\"\r\n                        @click=\"sendNewEmailCode\"\r\n              >\r\n                <span v-if=\"sendNewEmailCodeDisabled\">{{ newEmailCountdown }}s后重试</span>\r\n                <span v-else>获取验证码</span>\r\n              </m-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"next-btn\">\r\n            <m-button @click=\"bindEmail\">下一步</m-button>\r\n          </div>\r\n        </div>\r\n        <div v-else-if=\"steps===3\" class=\"success\">\r\n          <div>\r\n            <div class=\"success-title\">\r\n            <span>\r\n              <svg class=\"icon\" aria-hidden=\"true\">\r\n                <use xlink:href=\"#icon-success\"></use>\r\n              </svg>\r\n            </span>\r\n              <span>\r\n            邮箱换绑成功\r\n            </span>\r\n            </div>\r\n            <div class=\"success-content\">即将返回到登录页面</div>\r\n          </div>\r\n        </div>\r\n      </m-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Steps from \"@/components/steps/Steps\";\r\nimport Step from \"@/components/steps/Step\";\r\nimport MInput from \"@/components/common/MInput\";\r\nimport MButton from \"@/components/common/MButton\";\r\nimport MFormItem from \"@/components/common/MFormItem\";\r\nimport MForm from \"@/components/common/MForm\";\r\nimport {bindNewEmail, checkUpdateEmailCode, sendNewEmailVerifyCode, sendUpdateEmailVerifyCode} from \"@/api/user\";\r\nimport {checkEmailExists} from \"@/api/auth\";\r\n\r\nexport default {\r\n  name: \"BindEmail\",\r\n  components: {MForm, MFormItem, MButton, MInput, Step, Steps},\r\n  data() {\r\n    return {\r\n      steps: 1,\r\n      sendCodeLoading: false,\r\n      sendCodeDisabled: false,\r\n      countdown: 60,\r\n      sendNewEmailCodeLoading: false,\r\n      sendNewEmailCodeDisabled: false,\r\n      newEmailCountdown: 60,\r\n      emailForm: {\r\n        emailCode: '',\r\n        newEmail: '',\r\n        newEmailCode: ''\r\n      },\r\n      emailRules: {\r\n        emailCode: [{required: true, message: '验证码不能为空'}],\r\n        newEmail: [{asyncValidator: this.validateEmail}],\r\n        newEmailCode: [{required: true, message: '验证码不能为空'}]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    validateEmail(rule, value, callback) {\r\n      if (value === '') {\r\n        callback(new Error('请输入邮箱地址'))\r\n      } else if (!/^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(value)) {\r\n        callback(new Error('邮箱地址格式不正确'))\r\n      } else {\r\n        checkEmailExists(value).then(() => {\r\n          callback()\r\n        }).catch(() => {\r\n          callback(new Error('邮箱已注册'))\r\n        })\r\n      }\r\n    },\r\n    sendCode() {\r\n      this.sendCodeLoading = true\r\n      sendUpdateEmailVerifyCode()\r\n          .then(() => {\r\n            this.sendCodeDisabled = true\r\n            this.$message.success('邮箱发送成功', 1500)\r\n            const interval = setInterval(() => {\r\n              if (this.countdown === 1) {\r\n                clearInterval(interval)\r\n                this.sendCodeDisabled = false\r\n                this.countdown = 60\r\n                return\r\n              }\r\n              this.countdown--\r\n            }, 1000);\r\n          })\r\n          .catch(res => {\r\n            this.$message.error(res.msg, 1500)\r\n          })\r\n          .finally(() => {\r\n            this.sendCodeLoading = false\r\n          })\r\n    },\r\n    verifyIdentity() {\r\n      this.$refs.emailForm.validate(valid => {\r\n        if (valid) {\r\n          checkUpdateEmailCode(this.emailForm.emailCode)\r\n              .then(() => {\r\n                this.steps++\r\n              })\r\n              .catch(res => {\r\n                this.$message.error(res.msg, 1500)\r\n              })\r\n        }\r\n      })\r\n    },\r\n    sendNewEmailCode() {\r\n      this.$refs.emailForm.validateField('newEmail', valid => {\r\n        if (valid) {\r\n          this.sendNewEmailCodeLoading = true\r\n          sendNewEmailVerifyCode(this.emailForm.newEmail)\r\n              .then(() => {\r\n                this.sendNewEmailCodeDisabled = true\r\n                this.$message.success('邮箱发送成功', 1500)\r\n                const interval = setInterval(() => {\r\n                  if (this.newEmailCountdown === 1) {\r\n                    clearInterval(interval)\r\n                    this.sendNewEmailCodeDisabled = false\r\n                    this.newEmailCountdown = 60\r\n                    return\r\n                  }\r\n                  this.newEmailCountdown--\r\n                }, 1000);\r\n              })\r\n              .catch(res => {\r\n                this.$message.error(res.msg, 1500)\r\n              })\r\n              .finally(() => {\r\n                this.sendNewEmailCodeLoading = false\r\n              })\r\n        }\r\n      })\r\n    },\r\n    bindEmail() {\r\n      this.$refs.emailForm.validate(valid => {\r\n        if (valid) {\r\n          bindNewEmail(this.emailForm.newEmail, this.emailForm.newEmailCode, this.emailForm.emailCode)\r\n              .then(() => {\r\n                this.steps++\r\n                localStorage.removeItem('authorization')\r\n                setTimeout(() => {\r\n                  location.href = '/auth'\r\n                }, 2000)\r\n              })\r\n              .catch(res => {\r\n                this.$message.error(res.msg, 1500)\r\n              })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.success-content {\r\n  padding-top: 10px;\r\n  padding-left: 21px;\r\n  font-size: 16px;\r\n  color: #67c23a;\r\n}\r\n\r\n.success-title {\r\n  color: #67c23a;\r\n  font-size: 22px;\r\n}\r\n\r\n.success {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 240px;\r\n}\r\n\r\n.ucenter-container-body .m-input.code-inp {\r\n  width: 140px;\r\n}\r\n\r\n.item.form .m-button {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.item.form .label {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form.item {\r\n  height: auto;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.steps {\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.ucenter-container-body .m-input {\r\n  width: 260px;\r\n  height: 36px;\r\n  padding-right: 20px;\r\n}\r\n\r\n\r\n.next-btn .m-button {\r\n  margin-top: 28px;\r\n  width: 120px;\r\n}\r\n\r\n.ucenter-container-body {\r\n  width: 580px;\r\n}\r\n</style>","import { render } from \"./BindEmail.vue?vue&type=template&id=62144c5d&scoped=true\"\nimport script from \"./BindEmail.vue?vue&type=script&lang=js\"\nexport * from \"./BindEmail.vue?vue&type=script&lang=js\"\n\nimport \"./BindEmail.vue?vue&type=style&index=0&id=62144c5d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-62144c5d\"\n\nexport default script"],"sourceRoot":""}