(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74cd7bba"],{1444:function(e,t,n){},2457:function(e,t,n){},"495d":function(e,t,n){"use strict";var i=n("7a23"),c=Object(i["J"])("data-v-4c19db40");Object(i["t"])("data-v-4c19db40");var a={class:"steps"};Object(i["r"])();var s=c((function(e,t,n,c,s,d){return Object(i["q"])(),Object(i["e"])("div",a,[Object(i["x"])(e.$slots,"default",{},void 0,!0)])})),d=(n("a9e3"),{name:"Steps",provide:function(){return{steps:this}},props:{active:{type:Number,default:0}},data:function(){return{count:0}},mounted:function(){}});n("8b3e");d.render=s,d.__scopeId="data-v-4c19db40";t["a"]=d},"5bb2":function(e,t,n){},"7dc1":function(e,t,n){"use strict";n("1444")},"8b3e":function(e,t,n){"use strict";n("2457")},"9bf7":function(e,t,n){"use strict";n("5bb2")},c1cf:function(e,t,n){"use strict";var i=n("7a23"),c=Object(i["J"])("data-v-9754da56");Object(i["t"])("data-v-9754da56");var a={class:"step-icon"},s={key:0,class:"success-icon"},d=Object(i["h"])("svg",{class:"icon","aria-hidden":"true"},[Object(i["h"])("use",{"xlink:href":"#icon-dui"})],-1),o={key:1},l={class:"step-title"};Object(i["r"])();var r=c((function(e,t,n,c,r,u){return Object(i["q"])(),Object(i["e"])("div",{class:["step",{over:u.steps.count===r.index,active:u.steps.active===r.index,finish:u.steps.active>r.index,wait:u.steps.active<r.index}]},[Object(i["h"])("div",a,[u.steps.active>r.index?(Object(i["q"])(),Object(i["e"])("span",s,[d])):(Object(i["q"])(),Object(i["e"])("span",o,Object(i["A"])(r.index),1))]),Object(i["h"])("div",l,Object(i["A"])(n.title),1)],2)})),u={name:"Step",inject:["steps"],props:{title:String},data:function(){return{index:0}},mounted:function(){this.index=++this.steps.count}};n("9bf7");u.render=r,u.__scopeId="data-v-9754da56";t["a"]=u},f638:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),c=Object(i["J"])("data-v-62144c5d");Object(i["t"])("data-v-62144c5d");var a=Object(i["h"])("div",{class:"ucenter-container-title"},"更换邮箱",-1),s={class:"ucenter-container-body"},d={key:0},o={class:"item"},l=Object(i["h"])("div",{class:"label"},"绑定邮箱:",-1),r={class:"descript"},u={class:"item form"},b=Object(i["h"])("div",{class:"label"},"验证码:",-1),m={class:"descript"},j={key:0},O={key:1},f={class:"next-btn"},v=Object(i["g"])("下一步"),h={key:1},p={class:"item form"},w=Object(i["h"])("div",{class:"label"},"新邮箱:",-1),C={class:"descript"},E={class:"item form"},g=Object(i["h"])("div",{class:"label"},"验证码:",-1),y={class:"descript"},k={key:0},F={key:1},_={class:"next-btn"},q=Object(i["g"])("下一步"),x={key:2,class:"success"},I=Object(i["h"])("div",null,[Object(i["h"])("div",{class:"success-title"},[Object(i["h"])("span",null,[Object(i["h"])("svg",{class:"icon","aria-hidden":"true"},[Object(i["h"])("use",{"xlink:href":"#icon-success"})])]),Object(i["h"])("span",null," 邮箱换绑成功 ")]),Object(i["h"])("div",{class:"success-content"},"即将返回到登录页面")],-1);Object(i["r"])();var N=c((function(e,t,n,N,$,D){var V=Object(i["y"])("step"),L=Object(i["y"])("steps"),S=Object(i["y"])("m-input"),A=Object(i["y"])("m-form-item"),J=Object(i["y"])("m-button"),M=Object(i["y"])("m-form");return Object(i["q"])(),Object(i["e"])("div",null,[a,Object(i["h"])("div",s,[Object(i["h"])(L,{active:$.steps},{default:c((function(){return[Object(i["h"])(V,{title:"验证身份"}),Object(i["h"])(V,{title:"验证新邮箱"}),Object(i["h"])(V,{title:"修改成功"})]})),_:1},8,["active"]),Object(i["h"])(M,{ref:"emailForm",model:$.emailForm,rules:$.emailRules},{default:c((function(){return[1===$.steps?(Object(i["q"])(),Object(i["e"])("div",d,[Object(i["h"])("div",o,[l,Object(i["h"])("div",r,Object(i["A"])(e.$store.state.userInfo.email),1)]),Object(i["h"])("div",u,[b,Object(i["h"])("div",m,[Object(i["h"])(A,{prop:"emailCode"},{default:c((function(){return[Object(i["h"])(S,{class:"code-inp",modelValue:$.emailForm.emailCode,"onUpdate:modelValue":t[1]||(t[1]=function(e){return $.emailForm.emailCode=e}),placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1}),Object(i["h"])(J,{loading:$.sendCodeLoading,disabled:$.sendCodeDisabled,type:"secondary",onClick:D.sendCode},{default:c((function(){return[$.sendCodeDisabled?(Object(i["q"])(),Object(i["e"])("span",j,Object(i["A"])($.countdown)+"s后重试",1)):(Object(i["q"])(),Object(i["e"])("span",O,"获取验证码"))]})),_:1},8,["loading","disabled","onClick"])])]),Object(i["h"])("div",f,[Object(i["h"])(J,{onClick:D.verifyIdentity},{default:c((function(){return[v]})),_:1},8,["onClick"])])])):2===$.steps?(Object(i["q"])(),Object(i["e"])("div",h,[Object(i["h"])("div",p,[w,Object(i["h"])("div",C,[Object(i["h"])(A,{prop:"newEmail"},{default:c((function(){return[Object(i["h"])(S,{modelValue:$.emailForm.newEmail,"onUpdate:modelValue":t[2]||(t[2]=function(e){return $.emailForm.newEmail=e}),placeholder:"请输入新邮箱"},null,8,["modelValue"])]})),_:1})])]),Object(i["h"])("div",E,[g,Object(i["h"])("div",y,[Object(i["h"])(A,{prop:"newEmailCode"},{default:c((function(){return[Object(i["h"])(S,{class:"code-inp",modelValue:$.emailForm.newEmailCode,"onUpdate:modelValue":t[3]||(t[3]=function(e){return $.emailForm.newEmailCode=e}),placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1}),Object(i["h"])(J,{loading:$.sendNewEmailCodeLoading,disabled:$.sendNewEmailCodeDisabled,type:"secondary",onClick:D.sendNewEmailCode},{default:c((function(){return[$.sendNewEmailCodeDisabled?(Object(i["q"])(),Object(i["e"])("span",k,Object(i["A"])($.newEmailCountdown)+"s后重试",1)):(Object(i["q"])(),Object(i["e"])("span",F,"获取验证码"))]})),_:1},8,["loading","disabled","onClick"])])]),Object(i["h"])("div",_,[Object(i["h"])(J,{onClick:D.bindEmail},{default:c((function(){return[q]})),_:1},8,["onClick"])])])):3===$.steps?(Object(i["q"])(),Object(i["e"])("div",x,[I])):Object(i["f"])("",!0)]})),_:1},8,["model","rules"])])])})),$=(n("d3b7"),n("495d")),D=n("c1cf"),V=n("ab0b"),L=n("2746"),S=n("e6f9"),A=n("42e8"),J=n("c24f"),M=n("3786"),U={name:"BindEmail",components:{MForm:A["a"],MFormItem:S["a"],MButton:L["a"],MInput:V["a"],Step:D["a"],Steps:$["a"]},data:function(){return{steps:1,sendCodeLoading:!1,sendCodeDisabled:!1,countdown:60,sendNewEmailCodeLoading:!1,sendNewEmailCodeDisabled:!1,newEmailCountdown:60,emailForm:{emailCode:"",newEmail:"",newEmailCode:""},emailRules:{emailCode:[{required:!0,message:"验证码不能为空"}],newEmail:[{asyncValidator:this.validateEmail}],newEmailCode:[{required:!0,message:"验证码不能为空"}]}}},methods:{validateEmail:function(e,t,n){""===t?n(new Error("请输入邮箱地址")):/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?Object(M["a"])(t).then((function(){n()})).catch((function(){n(new Error("邮箱已注册"))})):n(new Error("邮箱地址格式不正确"))},sendCode:function(){var e=this;this.sendCodeLoading=!0,Object(J["f"])().then((function(){e.sendCodeDisabled=!0,e.$message.success("邮箱发送成功",1500);var t=setInterval((function(){if(1===e.countdown)return clearInterval(t),e.sendCodeDisabled=!1,void(e.countdown=60);e.countdown--}),1e3)})).catch((function(t){e.$message.error(t.msg,1500)})).finally((function(){e.sendCodeLoading=!1}))},verifyIdentity:function(){var e=this;this.$refs.emailForm.validate((function(t){t&&Object(J["b"])(e.emailForm.emailCode).then((function(){e.steps++})).catch((function(t){e.$message.error(t.msg,1500)}))}))},sendNewEmailCode:function(){var e=this;this.$refs.emailForm.validateField("newEmail",(function(t){t&&(e.sendNewEmailCodeLoading=!0,Object(J["e"])(e.emailForm.newEmail).then((function(){e.sendNewEmailCodeDisabled=!0,e.$message.success("邮箱发送成功",1500);var t=setInterval((function(){if(1===e.newEmailCountdown)return clearInterval(t),e.sendNewEmailCodeDisabled=!1,void(e.newEmailCountdown=60);e.newEmailCountdown--}),1e3)})).catch((function(t){e.$message.error(t.msg,1500)})).finally((function(){e.sendNewEmailCodeLoading=!1})))}))},bindEmail:function(){var e=this;this.$refs.emailForm.validate((function(t){t&&Object(J["a"])(e.emailForm.newEmail,e.emailForm.newEmailCode,e.emailForm.emailCode).then((function(){e.steps++,localStorage.removeItem("authorization"),setTimeout((function(){location.href="/auth"}),2e3)})).catch((function(t){e.$message.error(t.msg,1500)}))}))}}};n("7dc1");U.render=N,U.__scopeId="data-v-62144c5d";t["default"]=U}}]);
//# sourceMappingURL=chunk-74cd7bba.c8d83306.js.map